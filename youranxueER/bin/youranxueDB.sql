
/* Drop Tables */

DROP TABLE IF EXISTS YOURANXUE.FAVORITE;
DROP TABLE IF EXISTS YOURANXUE.STUDENT;
DROP TABLE IF EXISTS YOURANXUE.TEACHER_ROLL;
DROP TABLE IF EXISTS YOURANXUE.SCG_MST;
DROP TABLE IF EXISTS YOURANXUE.SCHOOL_MST;
DROP TABLE IF EXISTS YOURANXUE.ADDRESS_MST;
DROP TABLE IF EXISTS YOURANXUE.ANSWER_SHEET_QUESTION_TRN;
DROP TABLE IF EXISTS YOURANXUE.ANSWER_SHEET_TRN;
DROP TABLE IF EXISTS YOURANXUE.SECTION_KNOWLEDGE;
DROP TABLE IF EXISTS YOURANXUE.TEST_GROUP_TRN;
DROP TABLE IF EXISTS YOURANXUE.TEST_QUESTION_TRN;
DROP TABLE IF EXISTS YOURANXUE.TEST_TRN;
DROP TABLE IF EXISTS YOURANXUE.SECTION_MST;
DROP TABLE IF EXISTS YOURANXUE.CHAPTER_MST;
DROP TABLE IF EXISTS YOURANXUE.MY_BOOKS;
DROP TABLE IF EXISTS YOURANXUE.BOOK_MST;
DROP TABLE IF EXISTS YOURANXUE.CHOICE;
DROP TABLE IF EXISTS YOURANXUE.CITY_MST;
DROP TABLE IF EXISTS YOURANXUE.CLASS_MST;
DROP TABLE IF EXISTS YOURANXUE.CODE_MST;
DROP TABLE IF EXISTS YOURANXUE.CODE_TYPE_MST;
DROP TABLE IF EXISTS YOURANXUE.COURSE_TRN;
DROP TABLE IF EXISTS YOURANXUE.DISTRICT_MST;
DROP TABLE IF EXISTS YOURANXUE.EXPLAIN_IN_DETAIL;
DROP TABLE IF EXISTS YOURANXUE.FAVORITE_TYPE;
DROP TABLE IF EXISTS YOURANXUE.FILL_BLANK;
DROP TABLE IF EXISTS YOURANXUE.GRADE_MST;
DROP TABLE IF EXISTS YOURANXUE.USER_GROUP_MST;
DROP TABLE IF EXISTS YOURANXUE.GROUP_TRN;
DROP TABLE IF EXISTS YOURANXUE.HINT;
DROP TABLE IF EXISTS YOURANXUE.IMG_MST;
DROP TABLE IF EXISTS YOURANXUE.QUESTION_KNOWLEDGE;
DROP TABLE IF EXISTS YOURANXUE.KNOWLEDGE_MST;
DROP TABLE IF EXISTS YOURANXUE.PROVINCE_MST;
DROP TABLE IF EXISTS YOURANXUE.PUBLISHER_MST;
DROP TABLE IF EXISTS YOURANXUE.SHORT_ANSWER;
DROP TABLE IF EXISTS YOURANXUE.QUESTION;
DROP TABLE IF EXISTS YOURANXUE.QUESTION_TYPE_MST;
DROP TABLE IF EXISTS YOURANXUE.USER_ROLE_MST;
DROP TABLE IF EXISTS YOURANXUE.ROLE_MST;
DROP TABLE IF EXISTS YOURANXUE.SEMESTER_MST;
DROP TABLE IF EXISTS YOURANXUE.SUBJECT_MST;
DROP TABLE IF EXISTS YOURANXUE.TEACHER;
DROP TABLE IF EXISTS YOURANXUE.TEST_TYPE;
DROP TABLE IF EXISTS YOURANXUE.USER_MST;




/* Create Tables */

CREATE TABLE YOURANXUE.ADDRESS_MST
(
	ADDRESS_ID BIGINT NOT NULL,
	ADDRESS_DETAIL VARCHAR(100),
	PROVINCE BIGINT NOT NULL,
	CITY_ID BIGINT NOT NULL,
	DISTRICT_ID BIGINT NOT NULL,
	PRIMARY KEY (ADDRESS_ID)
) WITHOUT OIDS;


CREATE TABLE YOURANXUE.ANSWER_SHEET_QUESTION_TRN
(
	ANSWER_SHEET_QUESTION_ID SERIAL NOT NULL,
	ANSWER_SHEET_ID INT NOT NULL,
	USER_ANSWER TEXT,
	-- 问答题的时候，无法确定正确性，所以必须在此标识正确与否
	ANSWER_SHEET_STATUS INT,
	ANSWER_COMMENT TEXT,
	CREATE_DATE TIMESTAMP DEFAULT CURRENT_TIMESTAMP NOT NULL,
	UPDATE_DATE TIMESTAMP DEFAULT CURRENT_TIMESTAMP NOT NULL,
	UPDATE_USER VARCHAR(20),
	QUESTION_ID INT NOT NULL,
	PRIMARY KEY (ANSWER_SHEET_QUESTION_ID)
) WITHOUT OIDS;


CREATE TABLE YOURANXUE.ANSWER_SHEET_TRN
(
	ANSWER_SHEET_ID SERIAL NOT NULL,
	-- 邮箱地址
	USER_ID VARCHAR(30) NOT NULL,
	USED_TIME INT,
	CREATE_DATE TIMESTAMP DEFAULT CURRENT_TIMESTAMP NOT NULL,
	UPDATE_DATE TIMESTAMP DEFAULT CURRENT_TIMESTAMP NOT NULL,
	UPDATE_USER VARCHAR(20),
	PRIMARY KEY (ANSWER_SHEET_ID)
) WITHOUT OIDS;


CREATE TABLE YOURANXUE.BOOK_MST
(
	BOOK_ID SERIAL NOT NULL,
	GRADE_ID INT NOT NULL,
	BOOK_NAME VARCHAR(100),
	ISBN VARCHAR(20),
	SUBJECT_ID INT NOT NULL,
	SEMESTER_ID INT NOT NULL,
	PUBLISHER_ID INT NOT NULL,
	CREATE_DATE TIMESTAMP DEFAULT CURRENT_TIMESTAMP NOT NULL,
	UPDATE_DATE TIMESTAMP DEFAULT CURRENT_TIMESTAMP NOT NULL,
	UPDATE_USER VARCHAR(20),
	PRIMARY KEY (BOOK_ID)
) WITHOUT OIDS;


CREATE TABLE YOURANXUE.CHAPTER_MST
(
	CHAPTER_ID SERIAL NOT NULL,
	CHAPTER_NAME VARCHAR(30),
	BOOK_ID INT NOT NULL,
	CREATE_DATE TIMESTAMP DEFAULT CURRENT_TIMESTAMP NOT NULL,
	UPDATE_DATE TIMESTAMP DEFAULT CURRENT_TIMESTAMP NOT NULL,
	UPDATE_USER VARCHAR(20),
	PRIMARY KEY (CHAPTER_ID)
) WITHOUT OIDS;


CREATE TABLE YOURANXUE.CHOICE
(
	CHOICE_ID SERIAL NOT NULL,
	SEQUENCE_NO INT,
	CHOICE_ITEM TEXT,
	RIGHT_ANSWER_FLG BOOLEAN,
	QUESTION_ID INT NOT NULL,
	CREATE_DATE TIMESTAMP DEFAULT CURRENT_TIMESTAMP NOT NULL,
	UPDATE_DATE TIMESTAMP DEFAULT CURRENT_TIMESTAMP NOT NULL,
	UPDATE_USER VARCHAR(20),
	PRIMARY KEY (CHOICE_ID)
) WITHOUT OIDS;


CREATE TABLE YOURANXUE.CITY_MST
(
	CITY_ID BIGINT NOT NULL,
	CITY_NAME VARCHAR(30),
	PRIMARY KEY (CITY_ID)
) WITHOUT OIDS;


CREATE TABLE YOURANXUE.CLASS_MST
(
	CLASS_ID BIGINT NOT NULL,
	CLASS_NAME VARCHAR(30) NOT NULL,
	PRIMARY KEY (CLASS_ID)
) WITHOUT OIDS;


CREATE TABLE YOURANXUE.CODE_MST
(
	CODE_ID SERIAL NOT NULL,
	CODE_TYPE_ID INT NOT NULL,
	SEQ INT,
	CODE_KEY VARCHAR(20) NOT NULL,
	CODE_VALUE VARCHAR(40) NOT NULL,
	NOTE VARCHAR(200),
	CREATE_DATE TIMESTAMP DEFAULT CURRENT_TIMESTAMP NOT NULL,
	UPDATE_DATE TIMESTAMP DEFAULT CURRENT_TIMESTAMP NOT NULL,
	UPDATE_USER VARCHAR(20),
	PRIMARY KEY (CODE_ID)
) WITHOUT OIDS;


CREATE TABLE YOURANXUE.CODE_TYPE_MST
(
	CODE_TYPE_ID SERIAL NOT NULL,
	PHYSICAL_NAME VARCHAR(20) NOT NULL,
	LOGIC_NAME VARCHAR(20),
	CREATE_DATE TIMESTAMP DEFAULT CURRENT_TIMESTAMP NOT NULL,
	UPDATE_DATE TIMESTAMP DEFAULT CURRENT_TIMESTAMP NOT NULL,
	UPDATE_USER VARCHAR(20),
	PRIMARY KEY (CODE_TYPE_ID)
) WITHOUT OIDS;


CREATE TABLE YOURANXUE.COURSE_TRN
(
	COURSE_ID VARCHAR(40) NOT NULL,
	SUBJECT_ID INT NOT NULL,
	GRADE_ID INT NOT NULL,
	SEMESTER_ID INT NOT NULL,
	PUBLISHER_ID INT NOT NULL,
	COURSE_NAME VARCHAR(50),
	STUDENT_COUNT INT,
	END_DATE DATE,
	-- AUDIT_WAITTING：待审核
	-- AUDITED：已审核
	-- FINISHED：已结束
	STATUS VARCHAR(30),
	CREATE_DATE TIMESTAMP DEFAULT CURRENT_TIMESTAMP NOT NULL,
	UPDATE_DATE TIMESTAMP DEFAULT CURRENT_TIMESTAMP NOT NULL,
	UPDATE_USER VARCHAR(20),
	PRIMARY KEY (COURSE_ID)
) WITHOUT OIDS;


CREATE TABLE YOURANXUE.DISTRICT_MST
(
	DISTRICT_ID BIGINT NOT NULL,
	DISTRICT_NAME VARCHAR(30),
	PRIMARY KEY (DISTRICT_ID)
) WITHOUT OIDS;


CREATE TABLE YOURANXUE.EXPLAIN_IN_DETAIL
(
	EXPLAIN_IN_DETAIL SERIAL NOT NULL,
	QUESTION_ID INT NOT NULL,
	SEQUENCE_NO INT,
	CONTENT VARCHAR(200),
	CREATE_DATE TIMESTAMP DEFAULT CURRENT_TIMESTAMP NOT NULL,
	UPDATE_DATE TIMESTAMP DEFAULT CURRENT_TIMESTAMP NOT NULL,
	UPDATE_USER VARCHAR(20),
	PRIMARY KEY (EXPLAIN_IN_DETAIL)
) WITHOUT OIDS;


CREATE TABLE YOURANXUE.FAVORITE
(
	FAVORITE_ID SERIAL NOT NULL,
	FAVORITE_TYPE_ID INT NOT NULL,
	QUESTION_ID INT NOT NULL,
	-- 邮箱地址
	USER_ID VARCHAR(30) NOT NULL,
	CREATE_DATE TIMESTAMP DEFAULT CURRENT_TIMESTAMP NOT NULL,
	UPDATE_DATE TIMESTAMP DEFAULT CURRENT_TIMESTAMP NOT NULL,
	UPDATE_USER VARCHAR(20),
	PRIMARY KEY (FAVORITE_ID)
) WITHOUT OIDS;


CREATE TABLE YOURANXUE.FAVORITE_TYPE
(
	FAVORITE_TYPE_ID SERIAL NOT NULL,
	FAVORITE_TYPE_NAME VARCHAR(30),
	CREATE_DATE TIMESTAMP DEFAULT CURRENT_TIMESTAMP NOT NULL,
	UPDATE_DATE TIMESTAMP DEFAULT CURRENT_TIMESTAMP NOT NULL,
	UPDATE_USER VARCHAR(20),
	PRIMARY KEY (FAVORITE_TYPE_ID)
) WITHOUT OIDS;


CREATE TABLE YOURANXUE.FILL_BLANK
(
	FILL_BLANK_ID SERIAL NOT NULL,
	SEQUENCE_NO INT,
	ANSWER VARCHAR(50),
	QUESTION_ID INT NOT NULL,
	CREATE_DATE TIMESTAMP DEFAULT CURRENT_TIMESTAMP NOT NULL,
	UPDATE_DATE TIMESTAMP DEFAULT CURRENT_TIMESTAMP NOT NULL,
	UPDATE_USER VARCHAR(20),
	PRIMARY KEY (FILL_BLANK_ID)
) WITHOUT OIDS;


CREATE TABLE YOURANXUE.GRADE_MST
(
	GRADE_ID SERIAL NOT NULL,
	GRADE_NAME VARCHAR(20),
	CREATE_DATE TIMESTAMP DEFAULT CURRENT_TIMESTAMP NOT NULL,
	UPDATE_DATE TIMESTAMP DEFAULT CURRENT_TIMESTAMP NOT NULL,
	UPDATE_USER VARCHAR(20),
	PRIMARY KEY (GRADE_ID)
) WITHOUT OIDS;


CREATE TABLE YOURANXUE.GROUP_TRN
(
	GROUP_ID BIGINT NOT NULL,
	GROUP_NAME VARCHAR(30),
	CREATE_DATE TIMESTAMP DEFAULT CURRENT_TIMESTAMP NOT NULL,
	UPDATE_DATE TIMESTAMP DEFAULT CURRENT_TIMESTAMP NOT NULL,
	UPDATE_USER VARCHAR(20),
	PRIMARY KEY (GROUP_ID)
) WITHOUT OIDS;


CREATE TABLE YOURANXUE.HINT
(
	HINT_ID SERIAL NOT NULL,
	SEQUENCE_NO INT,
	QUESTION_ID_PARENT INT NOT NULL,
	QUESTION_ID INT NOT NULL,
	CREATE_DATE TIMESTAMP DEFAULT CURRENT_TIMESTAMP NOT NULL,
	UPDATE_DATE TIMESTAMP DEFAULT CURRENT_TIMESTAMP NOT NULL,
	UPDATE_USER VARCHAR(20),
	PRIMARY KEY (HINT_ID)
) WITHOUT OIDS;


CREATE TABLE YOURANXUE.IMG_MST
(
	IMG_ID SERIAL NOT NULL,
	IMG_TYPE SMALLINT,
	IMG_RELEATION_ID BIGINT,
	IMG_NAME VARCHAR(30),
	IMG_PATH TEXT NOT NULL,
	CREATE_DATE TIMESTAMP DEFAULT CURRENT_TIMESTAMP NOT NULL,
	UPDATE_DATE TIMESTAMP DEFAULT CURRENT_TIMESTAMP NOT NULL,
	UPDATE_USER VARCHAR(20),
	PRIMARY KEY (IMG_ID)
) WITHOUT OIDS;


CREATE TABLE YOURANXUE.KNOWLEDGE_MST
(
	KNOWLEDGE_ID SERIAL NOT NULL,
	KNOWLEDGE_NAME VARCHAR(30),
	CREATE_DATE TIMESTAMP DEFAULT CURRENT_TIMESTAMP NOT NULL,
	UPDATE_DATE TIMESTAMP DEFAULT CURRENT_TIMESTAMP NOT NULL,
	UPDATE_USER VARCHAR(20),
	PRIMARY KEY (KNOWLEDGE_ID)
) WITHOUT OIDS;


CREATE TABLE YOURANXUE.MY_BOOKS
(
	MY_BOOK_ID SERIAL NOT NULL UNIQUE,
	BOOK_ID INT NOT NULL,
	CREATE_DATE TIMESTAMP DEFAULT CURRENT_TIMESTAMP NOT NULL,
	UPDATE_DATE TIMESTAMP DEFAULT CURRENT_TIMESTAMP NOT NULL,
	UPDATE_USER VARCHAR(20),
	PRIMARY KEY (MY_BOOK_ID)
) WITHOUT OIDS;


CREATE TABLE YOURANXUE.PROVINCE_MST
(
	PROVINCE BIGINT NOT NULL,
	PROVINCE_NAME VARCHAR(30),
	PRIMARY KEY (PROVINCE)
) WITHOUT OIDS;


CREATE TABLE YOURANXUE.PUBLISHER_MST
(
	PUBLISHER_ID SERIAL NOT NULL,
	PUBLISHER_NAME VARCHAR(50),
	CREATE_DATE TIMESTAMP DEFAULT CURRENT_TIMESTAMP NOT NULL,
	UPDATE_DATE TIMESTAMP DEFAULT CURRENT_TIMESTAMP NOT NULL,
	UPDATE_USER VARCHAR(20),
	PRIMARY KEY (PUBLISHER_ID)
) WITHOUT OIDS;


CREATE TABLE YOURANXUE.QUESTION
(
	QUESTION_ID SERIAL NOT NULL,
	QUESTION_TYPE_ID INT NOT NULL,
	QUESTION VARCHAR(300),
	CREATE_DATE TIMESTAMP DEFAULT CURRENT_TIMESTAMP NOT NULL,
	UPDATE_DATE TIMESTAMP DEFAULT CURRENT_TIMESTAMP NOT NULL,
	UPDATE_USER VARCHAR(20),
	PRIMARY KEY (QUESTION_ID)
) WITHOUT OIDS;


CREATE TABLE YOURANXUE.QUESTION_KNOWLEDGE
(
	QUESTION_ID INT NOT NULL,
	KNOWLEDGE_ID INT NOT NULL,
	CREATE_DATE TIMESTAMP DEFAULT CURRENT_TIMESTAMP NOT NULL,
	UPDATE_DATE TIMESTAMP DEFAULT CURRENT_TIMESTAMP NOT NULL,
	UPDATE_USER VARCHAR(20),
	PRIMARY KEY (QUESTION_ID, KNOWLEDGE_ID),
	UNIQUE (QUESTION_ID, KNOWLEDGE_ID)
) WITHOUT OIDS;


CREATE TABLE YOURANXUE.QUESTION_TYPE_MST
(
	QUESTION_TYPE_ID SERIAL NOT NULL,
	QUESTION_TYPE_NAME VARCHAR(30),
	CREATE_DATE TIMESTAMP DEFAULT CURRENT_TIMESTAMP NOT NULL,
	UPDATE_DATE TIMESTAMP DEFAULT CURRENT_TIMESTAMP NOT NULL,
	UPDATE_USER VARCHAR(20),
	PRIMARY KEY (QUESTION_TYPE_ID)
) WITHOUT OIDS;


CREATE TABLE YOURANXUE.ROLE_MST
(
	ROLE_ID SERIAL NOT NULL,
	ROLE_NAME VARCHAR(20) NOT NULL,
	CREATE_DATE TIMESTAMP DEFAULT CURRENT_TIMESTAMP NOT NULL,
	UPDATE_DATE TIMESTAMP DEFAULT CURRENT_TIMESTAMP NOT NULL,
	UPDATE_USER VARCHAR(20),
	PRIMARY KEY (ROLE_ID)
) WITHOUT OIDS;


CREATE TABLE YOURANXUE.SCG_MST
(
	SGC_ID BIGINT NOT NULL,
	SCHOOL_ID BIGINT NOT NULL,
	GRADE_ID INT NOT NULL,
	CLASS_ID BIGINT NOT NULL,
	CREATE_DATE TIMESTAMP DEFAULT CURRENT_TIMESTAMP NOT NULL,
	UPDATE_DATE TIMESTAMP DEFAULT CURRENT_TIMESTAMP NOT NULL,
	UPDATE_USER VARCHAR(20),
	PRIMARY KEY (SGC_ID),
	UNIQUE (GRADE_ID, CLASS_ID, SCHOOL_ID)
) WITHOUT OIDS;


CREATE TABLE YOURANXUE.SCHOOL_MST
(
	SCHOOL_ID BIGINT NOT NULL,
	SCHOOL_NAME VARCHAR(50),
	ADDRESS_ID BIGINT NOT NULL,
	PRIMARY KEY (SCHOOL_ID)
) WITHOUT OIDS;


CREATE TABLE YOURANXUE.SECTION_KNOWLEDGE
(
	KNOWLEDGE_ID INT NOT NULL,
	SECTION_ID INT NOT NULL,
	CREATE_DATE TIMESTAMP DEFAULT CURRENT_TIMESTAMP NOT NULL,
	UPDATE_DATE TIMESTAMP DEFAULT CURRENT_TIMESTAMP NOT NULL,
	UPDATE_USER VARCHAR(20),
	PRIMARY KEY (KNOWLEDGE_ID, SECTION_ID),
	UNIQUE (KNOWLEDGE_ID, SECTION_ID)
) WITHOUT OIDS;


CREATE TABLE YOURANXUE.SECTION_MST
(
	SECTION_ID SERIAL NOT NULL,
	CHAPTER_ID INT NOT NULL,
	SECTION_NAME VARCHAR(30),
	CREATE_DATE TIMESTAMP DEFAULT CURRENT_TIMESTAMP NOT NULL,
	UPDATE_DATE TIMESTAMP DEFAULT CURRENT_TIMESTAMP NOT NULL,
	UPDATE_USER VARCHAR(20),
	PRIMARY KEY (SECTION_ID)
) WITHOUT OIDS;


CREATE TABLE YOURANXUE.SEMESTER_MST
(
	SEMESTER_ID SERIAL NOT NULL,
	SEMESTER_NAME VARCHAR(30),
	CREATE_DATE TIMESTAMP DEFAULT CURRENT_TIMESTAMP NOT NULL,
	UPDATE_DATE TIMESTAMP DEFAULT CURRENT_TIMESTAMP NOT NULL,
	UPDATE_USER VARCHAR(20),
	PRIMARY KEY (SEMESTER_ID)
) WITHOUT OIDS;


CREATE TABLE YOURANXUE.SHORT_ANSWER
(
	SHORT_ANSWER_ID SERIAL NOT NULL,
	SEQUENCE_NO INT,
	SHORT_ANSWER_CONTENT VARCHAR(200),
	ANSWER TEXT,
	QUESTION_ID INT NOT NULL,
	CREATE_DATE TIMESTAMP DEFAULT CURRENT_TIMESTAMP NOT NULL,
	UPDATE_DATE TIMESTAMP DEFAULT CURRENT_TIMESTAMP NOT NULL,
	UPDATE_USER VARCHAR(20),
	PRIMARY KEY (SHORT_ANSWER_ID)
) WITHOUT OIDS;


CREATE TABLE YOURANXUE.STUDENT
(
	-- 邮箱地址
	USER_ID VARCHAR(30) NOT NULL,
	SGC_ID BIGINT NOT NULL,
	CREATE_DATE TIMESTAMP DEFAULT CURRENT_TIMESTAMP NOT NULL,
	UPDATE_DATE TIMESTAMP DEFAULT CURRENT_TIMESTAMP NOT NULL,
	UPDATE_USER VARCHAR(20),
	PRIMARY KEY (USER_ID)
) WITHOUT OIDS;


CREATE TABLE YOURANXUE.SUBJECT_MST
(
	SUBJECT_ID SERIAL NOT NULL,
	SUBJECT_NAME VARCHAR(100),
	CREATE_DATE TIMESTAMP DEFAULT CURRENT_TIMESTAMP NOT NULL,
	UPDATE_DATE TIMESTAMP DEFAULT CURRENT_TIMESTAMP NOT NULL,
	UPDATE_USER VARCHAR(20),
	PRIMARY KEY (SUBJECT_ID)
) WITHOUT OIDS;


CREATE TABLE YOURANXUE.TEACHER
(
	-- 邮箱地址
	USER_ID VARCHAR(30) NOT NULL,
	TEACHING_AGE INT,
	CREATE_DATE TIMESTAMP DEFAULT CURRENT_TIMESTAMP NOT NULL,
	UPDATE_DATE TIMESTAMP DEFAULT CURRENT_TIMESTAMP NOT NULL,
	UPDATE_USER VARCHAR(20),
	PRIMARY KEY (USER_ID)
) WITHOUT OIDS;


CREATE TABLE YOURANXUE.TEACHER_ROLL
(
	TEACHER_ROLL_ID BIGINT NOT NULL,
	TEACHER_ROLL_NAME VARCHAR(20),
	-- 邮箱地址
	USER_ID VARCHAR(30) NOT NULL,
	SGC_ID BIGINT NOT NULL,
	BOOK_ID INT NOT NULL,
	DEFAULT_ROLL_FLG BOOLEAN NOT NULL,
	CREATE_DATE TIMESTAMP DEFAULT CURRENT_TIMESTAMP NOT NULL,
	UPDATE_DATE TIMESTAMP DEFAULT CURRENT_TIMESTAMP NOT NULL,
	UPDATE_USER VARCHAR(20),
	PRIMARY KEY (TEACHER_ROLL_ID),
	UNIQUE (USER_ID, DEFAULT_ROLL_FLG)
) WITHOUT OIDS;


CREATE TABLE YOURANXUE.TEST_GROUP_TRN
(
	TEST_GROUP_ID BIGINT NOT NULL,
	GROUP_ID BIGINT NOT NULL,
	TEST_ID BIGINT NOT NULL,
	TEST_TYPE_ID INT NOT NULL,
	START_TIME TIMESTAMP NOT NULL,
	END_TIME TIMESTAMP NOT NULL,
	-- UNPUBLISHED：未发布
	-- PUBLISHING：发布中
	--  FINISHED：已结束
	STATUS VARCHAR(30),
	CREATE_DATE TIMESTAMP DEFAULT CURRENT_TIMESTAMP NOT NULL,
	UPDATE_DATE TIMESTAMP DEFAULT CURRENT_TIMESTAMP NOT NULL,
	UPDATE_USER VARCHAR(20),
	PRIMARY KEY (TEST_GROUP_ID)
) WITHOUT OIDS;


CREATE TABLE YOURANXUE.TEST_QUESTION_TRN
(
	TEST_ID BIGINT NOT NULL,
	QUESTION_ID INT NOT NULL,
	SCORE INT,
	CREATE_DATE TIMESTAMP DEFAULT CURRENT_TIMESTAMP NOT NULL,
	UPDATE_DATE TIMESTAMP DEFAULT CURRENT_TIMESTAMP NOT NULL,
	UPDATE_USER VARCHAR(20)
) WITHOUT OIDS;


CREATE TABLE YOURANXUE.TEST_TRN
(
	TEST_ID BIGSERIAL NOT NULL,
	CHAPTER_ID INT NOT NULL,
	SECTION_ID INT NOT NULL,
	TEST_NAME VARCHAR,
	TOTAL_SCORE INT,
	-- 单位：分钟
	TEST_DURATION_MIN INT,
	CREATE_DATE TIMESTAMP DEFAULT CURRENT_TIMESTAMP NOT NULL,
	UPDATE_DATE TIMESTAMP DEFAULT CURRENT_TIMESTAMP NOT NULL,
	UPDATE_USER VARCHAR(20),
	PRIMARY KEY (TEST_ID)
) WITHOUT OIDS;


CREATE TABLE YOURANXUE.TEST_TYPE
(
	TEST_TYPE_ID INT NOT NULL,
	TEST_TYPE_NAME VARCHAR(30),
	CREATE_DATE TIMESTAMP DEFAULT CURRENT_TIMESTAMP NOT NULL,
	UPDATE_DATE TIMESTAMP DEFAULT CURRENT_TIMESTAMP NOT NULL,
	UPDATE_USER VARCHAR(20),
	PRIMARY KEY (TEST_TYPE_ID)
) WITHOUT OIDS;


CREATE TABLE YOURANXUE.USER_GROUP_MST
(
	-- 邮箱地址
	USER_ID VARCHAR(30) NOT NULL,
	GROUP_ID BIGINT NOT NULL,
	CREATE_DATE TIMESTAMP DEFAULT CURRENT_TIMESTAMP NOT NULL,
	UPDATE_DATE TIMESTAMP DEFAULT CURRENT_TIMESTAMP NOT NULL,
	UPDATE_USER VARCHAR(20)
) WITHOUT OIDS;


CREATE TABLE YOURANXUE.USER_MST
(
	-- 邮箱地址
	USER_ID VARCHAR(30) NOT NULL,
	USER_NAME VARCHAR(20),
	GENDER VARCHAR(10),
	DATE_OF_BIRTH DATE,
	PICTURE VARCHAR(150),
	PASSWORD TEXT NOT NULL,
	ACCOUNT_EXPIRED BOOLEAN,
	ACCOUNT_LOCKED BOOLEAN,
	CREDENTIALS_EXPIRED BOOLEAN,
	DISABLED BOOLEAN,
	CREATE_DATE TIMESTAMP DEFAULT CURRENT_TIMESTAMP NOT NULL,
	UPDATE_DATE TIMESTAMP DEFAULT CURRENT_TIMESTAMP NOT NULL,
	UPDATE_USER VARCHAR(20),
	PRIMARY KEY (USER_ID)
) WITHOUT OIDS;


CREATE TABLE YOURANXUE.USER_ROLE_MST
(
	ROLE_ID INT NOT NULL,
	-- 邮箱地址
	USER_ID VARCHAR(30) NOT NULL,
	CREATE_DATE TIMESTAMP DEFAULT CURRENT_TIMESTAMP NOT NULL,
	UPDATE_DATE TIMESTAMP DEFAULT CURRENT_TIMESTAMP NOT NULL,
	UPDATE_USER VARCHAR(20)
) WITHOUT OIDS;



/* Create Foreign Keys */

ALTER TABLE YOURANXUE.SCHOOL_MST
	ADD FOREIGN KEY (ADDRESS_ID)
	REFERENCES YOURANXUE.ADDRESS_MST (ADDRESS_ID)
	ON UPDATE RESTRICT
	ON DELETE RESTRICT
;


ALTER TABLE YOURANXUE.ANSWER_SHEET_QUESTION_TRN
	ADD FOREIGN KEY (ANSWER_SHEET_ID)
	REFERENCES YOURANXUE.ANSWER_SHEET_TRN (ANSWER_SHEET_ID)
	ON UPDATE RESTRICT
	ON DELETE RESTRICT
;


ALTER TABLE YOURANXUE.CHAPTER_MST
	ADD FOREIGN KEY (BOOK_ID)
	REFERENCES YOURANXUE.BOOK_MST (BOOK_ID)
	ON UPDATE RESTRICT
	ON DELETE RESTRICT
;


ALTER TABLE YOURANXUE.MY_BOOKS
	ADD FOREIGN KEY (BOOK_ID)
	REFERENCES YOURANXUE.BOOK_MST (BOOK_ID)
	ON UPDATE RESTRICT
	ON DELETE RESTRICT
;


ALTER TABLE YOURANXUE.TEACHER_ROLL
	ADD FOREIGN KEY (BOOK_ID)
	REFERENCES YOURANXUE.BOOK_MST (BOOK_ID)
	ON UPDATE RESTRICT
	ON DELETE RESTRICT
;


ALTER TABLE YOURANXUE.SECTION_MST
	ADD FOREIGN KEY (CHAPTER_ID)
	REFERENCES YOURANXUE.CHAPTER_MST (CHAPTER_ID)
	ON UPDATE RESTRICT
	ON DELETE RESTRICT
;


ALTER TABLE YOURANXUE.TEST_TRN
	ADD FOREIGN KEY (CHAPTER_ID)
	REFERENCES YOURANXUE.CHAPTER_MST (CHAPTER_ID)
	ON UPDATE RESTRICT
	ON DELETE RESTRICT
;


ALTER TABLE YOURANXUE.ADDRESS_MST
	ADD FOREIGN KEY (CITY_ID)
	REFERENCES YOURANXUE.CITY_MST (CITY_ID)
	ON UPDATE RESTRICT
	ON DELETE RESTRICT
;


ALTER TABLE YOURANXUE.SCG_MST
	ADD FOREIGN KEY (CLASS_ID)
	REFERENCES YOURANXUE.CLASS_MST (CLASS_ID)
	ON UPDATE RESTRICT
	ON DELETE RESTRICT
;


ALTER TABLE YOURANXUE.CODE_MST
	ADD FOREIGN KEY (CODE_TYPE_ID)
	REFERENCES YOURANXUE.CODE_TYPE_MST (CODE_TYPE_ID)
	ON UPDATE RESTRICT
	ON DELETE RESTRICT
;


ALTER TABLE YOURANXUE.ADDRESS_MST
	ADD FOREIGN KEY (DISTRICT_ID)
	REFERENCES YOURANXUE.DISTRICT_MST (DISTRICT_ID)
	ON UPDATE RESTRICT
	ON DELETE RESTRICT
;


ALTER TABLE YOURANXUE.FAVORITE
	ADD FOREIGN KEY (FAVORITE_TYPE_ID)
	REFERENCES YOURANXUE.FAVORITE_TYPE (FAVORITE_TYPE_ID)
	ON UPDATE RESTRICT
	ON DELETE RESTRICT
;


ALTER TABLE YOURANXUE.BOOK_MST
	ADD FOREIGN KEY (GRADE_ID)
	REFERENCES YOURANXUE.GRADE_MST (GRADE_ID)
	ON UPDATE RESTRICT
	ON DELETE RESTRICT
;


ALTER TABLE YOURANXUE.COURSE_TRN
	ADD FOREIGN KEY (GRADE_ID)
	REFERENCES YOURANXUE.GRADE_MST (GRADE_ID)
	ON UPDATE RESTRICT
	ON DELETE RESTRICT
;


ALTER TABLE YOURANXUE.SCG_MST
	ADD FOREIGN KEY (GRADE_ID)
	REFERENCES YOURANXUE.GRADE_MST (GRADE_ID)
	ON UPDATE RESTRICT
	ON DELETE RESTRICT
;


ALTER TABLE YOURANXUE.TEST_GROUP_TRN
	ADD FOREIGN KEY (GROUP_ID)
	REFERENCES YOURANXUE.GROUP_TRN (GROUP_ID)
	ON UPDATE RESTRICT
	ON DELETE RESTRICT
;


ALTER TABLE YOURANXUE.USER_GROUP_MST
	ADD FOREIGN KEY (GROUP_ID)
	REFERENCES YOURANXUE.GROUP_TRN (GROUP_ID)
	ON UPDATE RESTRICT
	ON DELETE RESTRICT
;


ALTER TABLE YOURANXUE.QUESTION_KNOWLEDGE
	ADD FOREIGN KEY (KNOWLEDGE_ID)
	REFERENCES YOURANXUE.KNOWLEDGE_MST (KNOWLEDGE_ID)
	ON UPDATE RESTRICT
	ON DELETE RESTRICT
;


ALTER TABLE YOURANXUE.SECTION_KNOWLEDGE
	ADD FOREIGN KEY (KNOWLEDGE_ID)
	REFERENCES YOURANXUE.KNOWLEDGE_MST (KNOWLEDGE_ID)
	ON UPDATE RESTRICT
	ON DELETE RESTRICT
;


ALTER TABLE YOURANXUE.ADDRESS_MST
	ADD FOREIGN KEY (PROVINCE)
	REFERENCES YOURANXUE.PROVINCE_MST (PROVINCE)
	ON UPDATE RESTRICT
	ON DELETE RESTRICT
;


ALTER TABLE YOURANXUE.BOOK_MST
	ADD FOREIGN KEY (PUBLISHER_ID)
	REFERENCES YOURANXUE.PUBLISHER_MST (PUBLISHER_ID)
	ON UPDATE RESTRICT
	ON DELETE RESTRICT
;


ALTER TABLE YOURANXUE.COURSE_TRN
	ADD FOREIGN KEY (PUBLISHER_ID)
	REFERENCES YOURANXUE.PUBLISHER_MST (PUBLISHER_ID)
	ON UPDATE RESTRICT
	ON DELETE RESTRICT
;


ALTER TABLE YOURANXUE.ANSWER_SHEET_QUESTION_TRN
	ADD FOREIGN KEY (QUESTION_ID)
	REFERENCES YOURANXUE.QUESTION (QUESTION_ID)
	ON UPDATE RESTRICT
	ON DELETE RESTRICT
;


ALTER TABLE YOURANXUE.CHOICE
	ADD FOREIGN KEY (QUESTION_ID)
	REFERENCES YOURANXUE.QUESTION (QUESTION_ID)
	ON UPDATE RESTRICT
	ON DELETE RESTRICT
;


ALTER TABLE YOURANXUE.EXPLAIN_IN_DETAIL
	ADD FOREIGN KEY (QUESTION_ID)
	REFERENCES YOURANXUE.QUESTION (QUESTION_ID)
	ON UPDATE RESTRICT
	ON DELETE RESTRICT
;


ALTER TABLE YOURANXUE.FAVORITE
	ADD FOREIGN KEY (QUESTION_ID)
	REFERENCES YOURANXUE.QUESTION (QUESTION_ID)
	ON UPDATE RESTRICT
	ON DELETE RESTRICT
;


ALTER TABLE YOURANXUE.FILL_BLANK
	ADD FOREIGN KEY (QUESTION_ID)
	REFERENCES YOURANXUE.QUESTION (QUESTION_ID)
	ON UPDATE RESTRICT
	ON DELETE RESTRICT
;


ALTER TABLE YOURANXUE.HINT
	ADD FOREIGN KEY (QUESTION_ID)
	REFERENCES YOURANXUE.QUESTION (QUESTION_ID)
	ON UPDATE RESTRICT
	ON DELETE RESTRICT
;


ALTER TABLE YOURANXUE.HINT
	ADD FOREIGN KEY (QUESTION_ID_PARENT)
	REFERENCES YOURANXUE.QUESTION (QUESTION_ID)
	ON UPDATE RESTRICT
	ON DELETE RESTRICT
;


ALTER TABLE YOURANXUE.QUESTION_KNOWLEDGE
	ADD FOREIGN KEY (QUESTION_ID)
	REFERENCES YOURANXUE.QUESTION (QUESTION_ID)
	ON UPDATE RESTRICT
	ON DELETE RESTRICT
;


ALTER TABLE YOURANXUE.SHORT_ANSWER
	ADD FOREIGN KEY (QUESTION_ID)
	REFERENCES YOURANXUE.QUESTION (QUESTION_ID)
	ON UPDATE RESTRICT
	ON DELETE RESTRICT
;


ALTER TABLE YOURANXUE.TEST_QUESTION_TRN
	ADD FOREIGN KEY (QUESTION_ID)
	REFERENCES YOURANXUE.QUESTION (QUESTION_ID)
	ON UPDATE RESTRICT
	ON DELETE RESTRICT
;


ALTER TABLE YOURANXUE.QUESTION
	ADD FOREIGN KEY (QUESTION_TYPE_ID)
	REFERENCES YOURANXUE.QUESTION_TYPE_MST (QUESTION_TYPE_ID)
	ON UPDATE RESTRICT
	ON DELETE RESTRICT
;


ALTER TABLE YOURANXUE.USER_ROLE_MST
	ADD FOREIGN KEY (ROLE_ID)
	REFERENCES YOURANXUE.ROLE_MST (ROLE_ID)
	ON UPDATE RESTRICT
	ON DELETE RESTRICT
;


ALTER TABLE YOURANXUE.STUDENT
	ADD FOREIGN KEY (SGC_ID)
	REFERENCES YOURANXUE.SCG_MST (SGC_ID)
	ON UPDATE RESTRICT
	ON DELETE RESTRICT
;


ALTER TABLE YOURANXUE.TEACHER_ROLL
	ADD FOREIGN KEY (SGC_ID)
	REFERENCES YOURANXUE.SCG_MST (SGC_ID)
	ON UPDATE RESTRICT
	ON DELETE RESTRICT
;


ALTER TABLE YOURANXUE.SCG_MST
	ADD FOREIGN KEY (SCHOOL_ID)
	REFERENCES YOURANXUE.SCHOOL_MST (SCHOOL_ID)
	ON UPDATE RESTRICT
	ON DELETE RESTRICT
;


ALTER TABLE YOURANXUE.SECTION_KNOWLEDGE
	ADD FOREIGN KEY (SECTION_ID)
	REFERENCES YOURANXUE.SECTION_MST (SECTION_ID)
	ON UPDATE RESTRICT
	ON DELETE RESTRICT
;


ALTER TABLE YOURANXUE.TEST_TRN
	ADD FOREIGN KEY (SECTION_ID)
	REFERENCES YOURANXUE.SECTION_MST (SECTION_ID)
	ON UPDATE RESTRICT
	ON DELETE RESTRICT
;


ALTER TABLE YOURANXUE.BOOK_MST
	ADD FOREIGN KEY (SEMESTER_ID)
	REFERENCES YOURANXUE.SEMESTER_MST (SEMESTER_ID)
	ON UPDATE RESTRICT
	ON DELETE RESTRICT
;


ALTER TABLE YOURANXUE.COURSE_TRN
	ADD FOREIGN KEY (SEMESTER_ID)
	REFERENCES YOURANXUE.SEMESTER_MST (SEMESTER_ID)
	ON UPDATE RESTRICT
	ON DELETE RESTRICT
;


ALTER TABLE YOURANXUE.FAVORITE
	ADD FOREIGN KEY (USER_ID)
	REFERENCES YOURANXUE.STUDENT (USER_ID)
	ON UPDATE RESTRICT
	ON DELETE RESTRICT
;


ALTER TABLE YOURANXUE.BOOK_MST
	ADD FOREIGN KEY (SUBJECT_ID)
	REFERENCES YOURANXUE.SUBJECT_MST (SUBJECT_ID)
	ON UPDATE RESTRICT
	ON DELETE RESTRICT
;


ALTER TABLE YOURANXUE.COURSE_TRN
	ADD FOREIGN KEY (SUBJECT_ID)
	REFERENCES YOURANXUE.SUBJECT_MST (SUBJECT_ID)
	ON UPDATE RESTRICT
	ON DELETE RESTRICT
;


ALTER TABLE YOURANXUE.TEACHER_ROLL
	ADD FOREIGN KEY (USER_ID)
	REFERENCES YOURANXUE.TEACHER (USER_ID)
	ON UPDATE RESTRICT
	ON DELETE RESTRICT
;


ALTER TABLE YOURANXUE.TEST_GROUP_TRN
	ADD FOREIGN KEY (TEST_ID)
	REFERENCES YOURANXUE.TEST_TRN (TEST_ID)
	ON UPDATE RESTRICT
	ON DELETE RESTRICT
;


ALTER TABLE YOURANXUE.TEST_QUESTION_TRN
	ADD FOREIGN KEY (TEST_ID)
	REFERENCES YOURANXUE.TEST_TRN (TEST_ID)
	ON UPDATE RESTRICT
	ON DELETE RESTRICT
;


ALTER TABLE YOURANXUE.TEST_GROUP_TRN
	ADD FOREIGN KEY (TEST_TYPE_ID)
	REFERENCES YOURANXUE.TEST_TYPE (TEST_TYPE_ID)
	ON UPDATE RESTRICT
	ON DELETE RESTRICT
;


ALTER TABLE YOURANXUE.ANSWER_SHEET_TRN
	ADD FOREIGN KEY (USER_ID)
	REFERENCES YOURANXUE.USER_MST (USER_ID)
	ON UPDATE RESTRICT
	ON DELETE RESTRICT
;


ALTER TABLE YOURANXUE.STUDENT
	ADD FOREIGN KEY (USER_ID)
	REFERENCES YOURANXUE.USER_MST (USER_ID)
	ON UPDATE RESTRICT
	ON DELETE RESTRICT
;


ALTER TABLE YOURANXUE.TEACHER
	ADD FOREIGN KEY (USER_ID)
	REFERENCES YOURANXUE.USER_MST (USER_ID)
	ON UPDATE RESTRICT
	ON DELETE RESTRICT
;


ALTER TABLE YOURANXUE.USER_GROUP_MST
	ADD FOREIGN KEY (USER_ID)
	REFERENCES YOURANXUE.USER_MST (USER_ID)
	ON UPDATE RESTRICT
	ON DELETE RESTRICT
;


ALTER TABLE YOURANXUE.USER_ROLE_MST
	ADD FOREIGN KEY (USER_ID)
	REFERENCES YOURANXUE.USER_MST (USER_ID)
	ON UPDATE RESTRICT
	ON DELETE RESTRICT
;



/* Comments */

COMMENT ON COLUMN YOURANXUE.ANSWER_SHEET_QUESTION_TRN.ANSWER_SHEET_STATUS IS '问答题的时候，无法确定正确性，所以必须在此标识正确与否';
COMMENT ON COLUMN YOURANXUE.ANSWER_SHEET_TRN.USER_ID IS '邮箱地址';
COMMENT ON COLUMN YOURANXUE.COURSE_TRN.STATUS IS 'AUDIT_WAITTING：待审核
AUDITED：已审核
FINISHED：已结束';
COMMENT ON COLUMN YOURANXUE.FAVORITE.USER_ID IS '邮箱地址';
COMMENT ON COLUMN YOURANXUE.STUDENT.USER_ID IS '邮箱地址';
COMMENT ON COLUMN YOURANXUE.TEACHER.USER_ID IS '邮箱地址';
COMMENT ON COLUMN YOURANXUE.TEACHER_ROLL.USER_ID IS '邮箱地址';
COMMENT ON COLUMN YOURANXUE.TEST_GROUP_TRN.STATUS IS 'UNPUBLISHED：未发布
PUBLISHING：发布中
 FINISHED：已结束';
COMMENT ON COLUMN YOURANXUE.TEST_TRN.TEST_DURATION_MIN IS '单位：分钟';
COMMENT ON COLUMN YOURANXUE.USER_GROUP_MST.USER_ID IS '邮箱地址';
COMMENT ON COLUMN YOURANXUE.USER_MST.USER_ID IS '邮箱地址';
COMMENT ON COLUMN YOURANXUE.USER_ROLE_MST.USER_ID IS '邮箱地址';



